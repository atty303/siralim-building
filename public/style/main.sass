$primary: #D0BCFF
$on-primary: #381E72
$primary-container: #4F378B
$on-primary-container: #EADDFF
$secondary: #625B71
$on-secondary: #FFFFFF
$tertiary: #7D5260
$on-tertiary: #FFFFFF
$tertiary-container: #FFD8E4
$on-tertiary-container: #31111D
$secondary-container: #4A4458
$on-secondary-container: #E8DEF8
$error-container: #8C1D18
$on-error-container: #F9DEDC
$background: #1C1B1F
$on-background: #E6E1E5
$surface: #1C1B1F
$on-surface: #E6E1E5
$surface-variant: #49454F
$on-surface-variant: #CAC4D0
$outline: #938F99

@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap')

body
  background: $surface-variant
  color: $on-surface-variant
  font-family: 'Roboto', sans-serif
  font-size: 14px

body.open-modal
  overflow: hidden

input[type=text]
  border: 1px solid $outline
  background: inherit
  color: inherit
  padding: 5px
  border-radius: 5px

// -----
.modal-overlay
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  background-color: #00000080

  .modal
    position: absolute
    top: 2.5%
    left: 2.5%
    right: 2.5%
    bottom: 2.5%
    width: 95%
    height: 95%
    background: $background
    box-shadow: 0 0 5px $outline

    > .title
      width: 100%
      background: $primary-container
      color: $on-primary-container
      height: 2rem
      text-align: right
      display: flex
      > .text
        flex-grow: 1
      > .close
        > button
          display: block
          width: 100%
          height: 100%
          background-color: inherit
          color: inherit
          border: none
          border-left: 1px solid $outline

    > .content
      padding: 10px
      height: calc(100% - 2rem)
      max-height: calc(100% - 2rem)

.modal-overlay.hidden
  visibility: hidden

// ----
.party
  margin: 20px

  h2
    font-size: 1rem
    text-align: center
    margin: 0

.party-member
  display: flex
  width: 100%
  border: 1px solid $outline
  margin: 10px
  background-color: $surface
  color: $on-surface

  .left-pane
    max-width: 180px
    min-width: 180px
    border-right: 1px solid $outline
    display: flex
    flex-direction: column

    .sprite-stat
      display: flex
      align-items: center
      flex-grow: 1

      .sprite
        margin: 0 1rem
        flex-grow: 1

      ul.stats
        padding-inline-start: 0
        margin: 0
        padding: 0 0.5rem 0 1rem
        > li
          display: block
          > .personality
            width: 1rem
            height: 1rem
          > .personality.positive
            color: #4caf50
          > .personality.negative
            color: #f44336
        .tooltip-text
          min-width: auto
          padding: 1rem
          text-align: center

          > span
            display: block
            margin-bottom: 0.5rem
          > img
            width: 1rem
            height: 1rem
          > button
            border-radius: 50%
            width: 40px
            height: 40px
            background-color: $surface-variant
            color: $on-surface-variant
            font-size: 24px
          > button:hover
            background-color: rgba($primary, 92%)
            color: $on-primary

    > .class
      background-color: #00000080
      text-align: center
      padding: 0.25em 1em

  .left-pane.death
    background-color: #6a1b9a80
  .left-pane.nature
    background-color: #558b2f80
  .left-pane.life
    background-color: #9e9d2480
  .left-pane.sorcery
    background-color: #28359380
  .left-pane.chaos
    background-color: #c6282880

  .right-pane
    flex-grow: 1
    padding-inline: 0

    .group
      display: flex
      > .side-title
        writing-mode: vertical-lr
        text-align: center
        font-weight: bold
        font-size: 0.5rem
        padding: 0 5px
        background-color: $primary-container
        color: $on-primary-container
        border-bottom: 1px solid $outline
      > ul
        flex-grow: 1

    .group:last-child
      > .side-title
        border-bottom: none


.party-pool
  width: 100%
  border: 1px solid $outline
  margin: 10px
  background-color: $surface
  color: $on-surface

ul.traits, ul.spells
  display: flex
  flex-direction: column
  margin: 0
  padding-inline: 0

  > li
    display: flex
    min-height: 3rem
    border-bottom: 1px solid $outline

    .trait, .spell
      flex-grow: 1
      //border-right: 1px solid $outline

    .trait.non-empty, .spell.non-empty
      display: flex
      align-items: center

      .handle
        cursor: move
        color: $primary

      .creature-name, .spell-name
        width: 25%
      .trait-description, .spell-description
        width: 75%
        margin: 0 0.5rem

    .trait.empty, .spell.empty
      display: flex
      align-items: center
      text-align: center
      color: $primary
      > span
        flex-grow: 1

    .clear
      min-width: 3rem
      max-width: 3rem
      min-height: 2rem
      border-left: 1px solid $outline
      border-right: 1px solid $outline

      button
        background: transparent
        border: none
        width: 100%
        height: 100%
        color: $primary
        cursor: pointer

      button:hover
        background: $error-container
        color: $on-error-container

.creature-name, .spell-name
  > span
    display: block
    margin: 5px
    padding: 5px
    background: $surface-variant
    color: $on-surface-variant
    > img
      margin-right: 4px

// ----
.modal.trait-spell-modal
  .content
    display: flex
    flex-direction: column
  .top
    display: flex
    align-items: center
    margin-bottom: 0.5rem
    > input
      flex-grow: 1
    > span
      max-width: 6rem
      min-width: 6rem
      text-align: right
  .table
    flex-grow: 1
    height: 100%
    overflow-y: scroll
  table
    position: relative
    table-layout: fixed
    thead
      tr
        th
          text-align: left
          padding: 8px
          position: sticky
          top: 0
          background: $secondary-container
          color: $on-secondary-container
          z-index: 10
    tbody
      background: $surface
      color: $on-surface
      tr
        content-visibility: auto
      tr:nth-child(2n)
        background: #313033
      tr:hover
        background: $primary
        color: $on-primary
      td
        padding: 5px
      td.class
        white-space: nowrap
      tr
        td.select > svg
          visibility: hidden
      tr.selected
        background-color: $tertiary
        color: $on-tertiary
        td.select > svg
          visibility: inherit
      tr:hover td.select > svg
        visibility: inherit
        color: $primary-container
        cursor: pointer

// ----

.desc-effect
  font-weight: bold
  .icon
    width: 1rem
    height: 1rem
.desc-effect.debuff
  color: #f44336
.desc-effect.buff
  color: #4caf50
.desc-effect.minion
  color: #ff9800

.desc-spell
  font-weight: bold
  color: #ba68c8

.desc-keyword
  font-weight: bold
  .icon
    width: 1rem
    height: 1rem

.desc-keyword.stat
  color: #fff176
.desc-keyword.action, .desc-keyword.timeline
  color: #aed581


.tooltip
  position: relative
  white-space: nowrap

.tooltip-text
  opacity: 0
  visibility: hidden
  position: absolute
  left: 50%
  transform: translateX(-50%)
  top: 1.2rem
  display: inline-block
  padding: 5px
  border-radius: 3px
  transition: 0.1s ease-in
  background: #000
  color: #fff
  font-weight: normal
  min-width: 20rem

.tooltip:hover .tooltip-text
  opacity: 1
  visibility: visible
  z-index: 100

.trait-description .tooltip-text, .description .tooltip-text
  max-width: 20rem
  white-space: normal
  text-align: center

.creature-name .tooltip-text
  display: flex
  align-items: center
  padding: 0.5rem 1rem

  ul.stats
    margin-left: 10px
    margin-right: 1rem
    padding: 0 1rem 0 0
    border-right: 1px solid $outline

    > li
      display: block
      white-space: nowrap

      img
        width: 1rem
        height: 1rem

  span.creature
    white-space: nowrap
    font-weight: bold
    line-height: 2rem
  span.family
    white-space: nowrap
    > span
      font-weight: bold
      color: $outline
  span.trait
    white-space: nowrap
    > span
      font-weight: bold
      color: $outline
  span.material
    white-space: nowrap
    > span
      font-weight: bold
      color: $outline
  span.sources
    > span
      font-weight: bold
      color: $outline
    ul
      padding-inline-start: 1rem
      > li
        white-space: nowrap

.name .tooltip-text
  display: flex
  align-items: center
  padding: 0.5rem 1rem
